"use strict";!function(n,t){t.lsGet=function(t){var i=n.getItem(t);if(i)return JSON.parse(i)},t.lsSet=function(t,i){n.setItem(t,JSON.stringify(i))}}(window.localStorage,window.myScript||(window.myScript={}));
"use strict";!function(){var i=window.myScript,n=new Vue({});Vue.component("task",{template:"#task-tpl",props:["todo"],methods:{action:function(t,e){n.$emit(t,e)}}}),new Vue({el:"#todo",data:{list:[],current:{id:NaN,title:"",completed:!1,remind:"",desc:""}},mounted:function(){this.list=i.lsGet("list")||this.list;var e=this;n.$on("remove",function(t){e.remove(t)}),n.$on("set_current",function(t){e.set_current(t)}),n.$on("toggle_complete",function(t){e.toggle_complete(t)}),n.$on("toggle_detail",function(t){e.toggle_detail(t)})},methods:{merge:function(){var t=this.current;if(t.title){var e=t.id;if(e){var i=this.copy(t),n=this.findIndexById(e);Vue.set(this.list,n,i)}else{t.id=(new Date).getTime();var s=this.copy(t);this.list.push(s)}this.current={}}},remove:function(t){var e=this.findIndexById(t);this.list.splice(e,1)},set_current:function(t){this.current=this.copy(t)},copy:function(t){return Object.assign({},t)},findIndexById:function(e){return this.list.findIndex(function(t){return t.id===e})},toggle_complete:function(t){var e=this.findIndexById(t);Vue.set(this.list[e],"completed",!this.list[e].completed)},toggle_detail:function(t){var e=this.findIndexById(t);Vue.set(this.list[e],"show_detail",!this.list[e].show_detail)}},watch:{list:{deep:!0,handler:function(t,e){i.lsSet("list",t||[])}}}})}();