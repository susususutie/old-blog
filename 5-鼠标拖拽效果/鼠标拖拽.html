<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>鼠标拖拽效果</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        div,
        span {
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
            top: 0px;
            border-radius: 50%;
        }

        div {
            left: 0px;
        }

        span {
            left: 300px;
        }
    </style>
</head>

<body>
    <div></div>
    <span></span>
</body>
<script>

    var div = document.getElementsByTagName('div')[0];
    var span = document.getElementsByTagName('span')[0];
    drag(div)
    drag(span)

    function drag(ele) {
        
        var key = 1;
        var mouseOnEleX;
        var mouseOnEleY;

        ele.onmousedown = function (event) {
            // console.log(ele, "mouse down")
            var event = event || window.event;
            mouseOnEleX = event.clientX - this.offsetLeft;
            mouseOnEleY = event.clientY - this.offsetTop;
            key = 1;
            
            document.onmousemove = function (event) {
                // console.log(ele, "doc mouse move")
                var event = event || window.event;
                if (key) {
                    var newOffSetLeft = event.clientX - mouseOnEleX;
                    var newOffSetTop = event.clientY - mouseOnEleY;
                    ele.style.left = newOffSetLeft + "px";
                    ele.style.top = newOffSetTop + "px";
                }
            }

            document.onmouseup = function () {
                // console.log(ele, "doc mouse up")
                key = 0;
                document.onmousemove = null;
                document.onmouseup = null;
                // console.log("all end")
            }
        }
    }


</script>

</html>